define(["dojo/_base/declare","../common/Class","../common/MVCObject","../common/WMapUtils"],function(t,e,o,r){return t("DrawTypeControl",[o],{constructor:function(t,e){this.options=t||{},this.initOptions($.extend({mapv:null,drawTypeControlOptions:{},layer:null},t)),this.bindTo("drawTypeControlOptions",this.getMapv()),this.mapv=t.mapv,this.defaultAnchor="Bottom_Right",this.defaultOffset={x:10,y:10};var o=new r;o.addCssByStyle(["#MapvDrawTypeControl { list-style:none; position:absolute; right:0px; top:0px; bottom:0px; padding:0; margin:0;","border-radius: 5px; overflow: hidden; border: 1px solid rgb(153, 153, 153); box-shadow: rgba(0, 0, 0, 0.2) 0px 0px 4px 2px;}","#MapvDrawTypeControl li{ padding:0; margin:0; cursor:pointer; ","color:#333; padding:5px; background:rgba(255, 255, 255, 1); border-bottom: 1px solid #aaa;}","#MapvDrawTypeControl li.current{ background:#999; color:#fff;}"].join("\n")),this._init(e)},_init:function(t){var e=this.ul=document.createElement("ul");switch(e.setAttribute("id","MapvDrawTypeControl"),this.defaultAnchor){case"Bottom_Right":e.style.position="absolute",e.style.top=(this.defaultOffset.x||10)+"px",e.style.right=(this.defaultOffset.x||10)+"px",e.style.bottom="auto",e.style.left="auto",e.style.zIndex=10}var o=this;return e.addEventListener("click",function(t){var e=t.target;if("LI"===e.nodeName){for(var r=e.parentNode,n=r.getElementsByTagName("li"),i=0;i<n.length;i++)n[i].className="";var a=e.getAttribute("drawType");e.className="current",o.getDrawTypeControlOptions().drawOptions&&o.getDrawTypeControlOptions().drawOptions[a]&&o.layer.setDrawOptions(o.getDrawTypeControlOptions().drawOptions[a]),o.layer.setDrawType(a)}}),this.showLayer(),t.root.childNodes[0].appendChild(e),e},getContainer:function(){return this.ul},drawTypeControlOptions_changed:function(){this.layer=this.getDrawTypeControlOptions().layer,this.layer&&(this.showLayer(),void 0!==this.getDrawTypeControlOptions().anchor&&this.setAnchor(this.getDrawTypeControlOptions().anchor),void 0!==this.getDrawTypeControlOptions().offset&&this.setOffset(this.getDrawTypeControlOptions().offset))},showLayer:function(){if(this.layer){var t=this.ul;t.innerHTML="";for(var e=["simple","heatmap","density","bubble","category","choropleth","intensity","cluster"],o=0;o<e.length;o++){var r=e[o],n=document.createElement("li");this.layer.getDrawType()===r&&(n.className="current"),n.setAttribute("drawType",r),n.innerHTML=r,t.appendChild(n)}}}})});