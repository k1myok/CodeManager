define(["dojo/_base/declare","../common/Class","../common/WMapUtils"],function(t,e,n){return t("OptionalData",null,{constructor:function(t){var e=t.options||{};this.drawType=e.drawType,this.super=t,this.options=e.drawOptions||{},this.initCSS(),this.initDom(),this.bindEvent()},initCSS:function(){(new n).addCssByStyle([".controlBox { position:absolute; left:0px; top:0px; background:rgba(0,0,0,0.5); padding:10px; }",".controlBox input {border-radius:6px; border:none; padding:10px;}",".controlBox button ","{ padding:8px 10px; border:none; width:40%; margin-left: 10px; border-radius:6px; cursor:pointer; }",".controlBoxBlock { color:#fff; padding: 10px; }",".controlBoxTitle { display:inline-block; width:100px; text-align:right; padding-right:10px; }"].join("\n"))},initDom:function(){var t=this.box=document.createElement("div");t.className="controlBox";var e=this.contentBox=document.createElement("div"),n=document.createElement("div");n.style.textAlign="center";var o=this.updateBtn=document.createElement("button"),i=this.resetBtn=document.createElement("button");return o.textContent="update",i.textContent="reset",t.appendChild(e),n.appendChild(o),n.appendChild(i),t.appendChild(n),document.body.appendChild(t),t},initController:function(t,e){return!1},bindEvent:function(){var t=this;this.updateBtn.onclick=function(){for(var e=0;e<t.options.editable.length;e++){var n=t.options.editable[e].name,o=t.contentBox.querySelector('input[name="'+n+'"]');o&&("radio"===o.type?(o=t.contentBox.querySelector('input[name="'+n+'"]:checked'),t.options[n]=o.value):"checkbox"===o.type?(o=t.contentBox.querySelector('input[name="'+n+'"]'),t.options[n]=o.checked):t.options[n]="true"===o.getAttribute("isJson")?JSON.parse(o.value):o.value)}var i=t._layer._getDrawer(t.drawType);i.setDrawOptions(t.options),t._layer.draw()},this.resetBtn.onclick=function(){for(var e=0;e<t.options.editable.length;e++){var n=t.options.editable[e].name,o=t.options.editable[e]._oldVal;t.options[n]=o}var i=this._layer._getDrawer(t.drawType);i.setDrawOptions(t.options),this._layer.draw(),t.initController()}}})});