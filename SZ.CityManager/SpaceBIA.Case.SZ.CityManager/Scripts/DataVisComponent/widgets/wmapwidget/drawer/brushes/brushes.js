define(["dojo/_base/declare"],function(t){return t("Brushes",null,{brushes:{},constructor:function(){this.brushes.basic=this.basicBrush,this.brushes.bezier=this.bezierBrush,this.brushes.colored=this.coloredBrush,this.brushes.dotsPattern=this.dotsPatternBrush,this.brushes.fur=this.furBrush,this.brushes.furNeighbor=this.furNeighborBrush,this.brushes.linesPattern=this.linesPatternBrush,this.brushes.neighbor=this.neighborBrush,this.brushes.pen2=this.pen2Brush,this.brushes.pen=this.penBrush,this.brushes.spray=this.sprayBrush,this.brushes.thick=this.thickBrush},basicBrush:function(t,e){t.beginPath(),t.moveTo(e[0][0],e[0][1]);for(var r=1;r<e.length;r++)t.lineTo(e[r][0],e[r][1]);t.stroke()},bezierBrush:function(t,e){function r(t,e){return{x:t[0]+(e[0]-t[0])/2,y:t[1]+(e[1]-t[1])/2}}t.beginPath(),t.moveTo(e[0][0],e[0][1]);for(var a=e[0],n=e[1],h=1;h<e.length;h++){var o=r(a,n);t.quadraticCurveTo(a[0],a[1],o.x,o.y),a=e[h],n=e[h+1]}t.stroke()},coloredBrush:function(t,e){function r(t,e,r){for(var n=-10;10>n;n+=4)for(var h=-10;10>h;h+=4)Math.random()>.5&&(t.fillStyle=["red","orange","yellow","green","light-blue","blue","purple"][a(0,6)],t.fillRect(e+n,r+h,2,4))}function a(t,e){return Math.floor(Math.random()*(e-t+1))+t}t.beginPath();for(var n=0;n<e.length;n++)r(t,e[n][0],e[n][1])},dotsPatternBrush:function(t,e){function r(t,e){return[t[0]+(e[0]-t[0])/2,t[1]+(e[1]-t[1])/2]}function a(){var t=document.createElement("canvas"),e=10,r=5,a=t.getContext("2d");return t.width=t.height=e+r,a.fillStyle="red",a.beginPath(),a.arc(e/2,e/2,e/2,0,2*Math.PI,!1),a.closePath(),a.fill(),t}t.beginPath();var n=e[0],h=e[1];t.moveTo(n[0],n[1]);for(var o=1;o<e.length;o++){var i=r(n,h);t.quadraticCurveTo(n[0],n[1],i[0],i[1]),n=e[o],h=e[o+1]}var A=t.createPattern(a(),"repeat");t.strokeStyle=A,t.stroke()},furBrush:function(t,e){function r(t){t.save(),t.lineWidth=1,t.beginPath(),t.moveTo(0,0),t.lineTo(1,0),t.stroke(),t.restore();var e=t.getImageData(0,0,1,1).data;t.clearRect(0,0,1,1);for(var r=t.getImageData(0,0,t.canvas.width,t.canvas.height),a=3,n=r.data.length;n>a;a+=4)r.data[a-3]=e[0],r.data[a-2]=e[1],r.data[a-1]=e[2];t.putImageData(r,0,0)}function a(t,e){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function n(t,e){return Math.atan2(e[0]-t[0],e[1]-t[1])}function h(t,e){return Math.floor(Math.random()*(e-t+1))+t}t.beginPath();var o=e[0],i=new Image;i.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB50RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNS4xqx9I6wAAABR0RVh0Q3JlYXRpb24gVGltZQAxLzQvMTJldbXMAAACIklEQVRYhbWX227bMBBEj25pLk2KImj+/w+LvjRxJVN5ICeebKmqsmUBC11AkYezQy3VAPfADfAF6IEZGIE/wKFcH7nS0QEPJZ6AbwbUFZhUzvM1AHryzB+B7wWgBd6AX5wUUaRrANyQFXgGXoCBLP3Pcq2Z/yanY1eIvsQtOQU/gK/knD8ZgMe0J0QPNOR8C+K53D8WgGQxA697QvSh845swgeyEj1ZDW8jiF2M2ZPzeiidvpYBB+CObEgB6KyB38hKXATRkVeBvgP3ZeA7ckq0HBtOq2AqcWQHFTo++0D3g4WM2hrE0SCkytkATXg2l2etDT6UtoI47gXRlbNm5SGQjs9qOMQU2m+G8M+tS+szUzup4UokLoTo7NoBxhLu8gghY0blNqXDAVwJQUgNKeG+kHljOjYVry7ce9HR4AJRSXaIuESjh1YhIkCEcE9ECKVEEA4g1VbTUQOoQXg6IoSipsRqOpYAHCSa0yVegqiZsgqxBrAG4f0o4jv/hPgfAO/Qzen1oOWkRsvfSnhJPwtAELVaIAgMpA3gi9+ILQAO4W53JZYgFlOxFcAhavUgkeVXDWnsnZiO+VwAB4m+8DyrojaV9h9KXALgndbKsyAUVYhLAdTpUlHSsQSQ9gBwiFgPXAlv92HevQAihG9ikz13pUZg2hPAIbyiuuQ++AiM/c4AgtBGxlfJgbytazgVt3QNAEH4niCRf/cH8tJMBWh6B2crbJFfpZtGAAAAAElFTkSuQmCC";for(var A=1;A<e.length;A++){for(var s=e[A],g=a(o,s),u=n(o,s),l=0;g>l;l++){var c=o[0]+Math.sin(u)*l,v=o[1]+Math.cos(u)*l;t.save(),t.translate(c,v),t.scale(.3,.3),t.rotate(180*Math.PI/h(0,180)),t.drawImage(i,0,0),t.restore()}o=s}r(t)},furNeighborBrush:function(t,e){for(var r=1;r<e.length;r++){t.beginPath(),t.lineWidth=3,t.moveTo(e[r-1][0],e[r-1][1]),t.lineTo(e[r][0],e[r][1]),t.globalAlpha=1,t.stroke();for(var a=0,n=r;n>a;a++){var h=e[a][0]-e[r][0],o=e[a][1]-e[r][1],i=h*h+o*o;2500>i&&Math.random()<i/50*50&&(t.beginPath(),t.lineWidth=1,t.globalAlpha=.1,t.moveTo(e[r][0]+.2*h,e[r][1]+.2*o),t.lineTo(e[a][0]-.2*h,e[a][1]-.2*o),t.stroke())}}},linesPatternBrush:function(t,e){function r(t,e){return[t[0]+(e[0]-t[0])/2,t[1]+(e[1]-t[1])/2]}function a(){var t=document.createElement("canvas"),e=10,r=5,a=t.getContext("2d");return t.width=t.height=e+r,a.strokeStyle="green",a.lineWidth=5,a.beginPath(),a.moveTo(0,5),a.lineTo(10,5),a.closePath(),a.stroke(),t}t.beginPath();var n=e[0],h=e[1];t.moveTo(n[0],n[1]);for(var o=1;o<e.length;o++){var i=r(n,h);t.quadraticCurveTo(n[0],n[1],i[0],i[1]),n=e[o],h=e[o+1]}var A=t.createPattern(a(),"repeat");t.strokeStyle=A,t.stroke()},neighborBrush:function(t,e){t.beginPath();for(var r=1;r<e.length;r++){t.moveTo(e[r-1][0],e[r-1][1]),t.lineTo(e[r][0],e[r][1]);for(var a=0,n=r;n>a;a++){var h=e[a][0]-e[r][0],o=e[a][1]-e[r][1],i=h*h+o*o;i>100&&900>i&&(t.moveTo(e[r][0]+.2*h,e[r][1]+.2*o),t.lineTo(e[a][0]-.2*h,e[a][1]-.2*o))}}t.stroke()},pen2Brush:function(t,e){function r(t,e){return Math.floor(Math.random()*(e-t+1))+t}t.beginPath();var a=e[0];t.lineWidth=1;for(var n=1;n<e.length;n++){var h=e[n];t.moveTo(a[0]-r(0,2),a[1]-r(0,2)),t.lineTo(h[0]-r(0,2),h[1]-r(0,2)),t.moveTo(a[0],a[1]),t.lineTo(h[0],h[1]),t.moveTo(a[0]+r(0,2),a[1]+r(0,2)),t.lineTo(h[0]+r(0,2),h[1]+r(0,2)),a=h}t.stroke()},penBrush:function(t,e){function r(t,e){return Math.floor(Math.random()*(e-t+1))+t}t.beginPath();for(var a=1;a<e.length;a++)t.beginPath(),t.moveTo(e[a-1][0],e[a-1][1]),t.lineWidth=r(3,5),t.lineTo(e[a][0],e[a][1]),t.stroke()},sprayBrush:function(t,e){function r(t,e){return Math.floor(Math.random()*(e-t+1))+t}t.beginPath();for(var a=50,n=0;n<e.length;n++)for(var h=a;h--;){var o=10,i=r(-o,o),A=r(-o,o);t.fillRect(e[n][0]+i,e[n][1]+A,1,1)}},thickBrush:function(t,e){function r(t){t.save(),t.lineWidth=1,t.beginPath(),t.moveTo(0,0),t.lineTo(1,0),t.stroke(),t.restore();var e=t.getImageData(0,0,1,1).data;t.clearRect(0,0,1,1);for(var r=t.getImageData(0,0,t.canvas.width,t.canvas.height),a=3,n=r.data.length;n>a;a+=4)r.data[a-3]=e[0],r.data[a-2]=e[1],r.data[a-1]=e[2];t.putImageData(r,0,0)}function a(t,e){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function n(t,e){return Math.atan2(e[0]-t[0],e[1]-t[1])}t.beginPath();var h=e[0],o=new Image;o.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAAB50RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNS4xqx9I6wAAABR0RVh0Q3JlYXRpb24gVGltZQAxLzQvMTJldbXMAAACIklEQVRYhbWX227bMBBEj25pLk2KImj+/w+LvjRxJVN5ICeebKmqsmUBC11AkYezQy3VAPfADfAF6IEZGIE/wKFcH7nS0QEPJZ6AbwbUFZhUzvM1AHryzB+B7wWgBd6AX5wUUaRrANyQFXgGXoCBLP3Pcq2Z/yanY1eIvsQtOQU/gK/knD8ZgMe0J0QPNOR8C+K53D8WgGQxA697QvSh845swgeyEj1ZDW8jiF2M2ZPzeiidvpYBB+CObEgB6KyB38hKXATRkVeBvgP3ZeA7ckq0HBtOq2AqcWQHFTo++0D3g4WM2hrE0SCkytkATXg2l2etDT6UtoI47gXRlbNm5SGQjs9qOMQU2m+G8M+tS+szUzup4UokLoTo7NoBxhLu8gghY0blNqXDAVwJQUgNKeG+kHljOjYVry7ce9HR4AJRSXaIuESjh1YhIkCEcE9ECKVEEA4g1VbTUQOoQXg6IoSipsRqOpYAHCSa0yVegqiZsgqxBrAG4f0o4jv/hPgfAO/Qzen1oOWkRsvfSnhJPwtAELVaIAgMpA3gi9+ILQAO4W53JZYgFlOxFcAhavUgkeVXDWnsnZiO+VwAB4m+8DyrojaV9h9KXALgndbKsyAUVYhLAdTpUlHSsQSQ9gBwiFgPXAlv92HevQAihG9ikz13pUZg2hPAIbyiuuQ++AiM/c4AgtBGxlfJgbytazgVt3QNAEH4niCRf/cH8tJMBWh6B2crbJFfpZtGAAAAAElFTkSuQmCC";for(var i=1;i<e.length;i++){for(var A=e[i],s=a(h,A),g=n(h,A),u=0;s>u;u+=2){var l=h[0]+Math.sin(g)*u,c=h[1]+Math.cos(g)*u;t.save(),t.translate(l,c),t.scale(.3,.3),t.drawImage(o,0,0),t.restore()}h=A}r(t)}})});