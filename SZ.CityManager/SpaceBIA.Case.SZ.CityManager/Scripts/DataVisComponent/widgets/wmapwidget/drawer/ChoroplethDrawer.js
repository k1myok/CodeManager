define(["dojo/_base/declare","../common/Class","../common/WMapUtils","./Drawer"],function(t,e,o,a){return t("ChoroplethDrawer",[a],{constructor:function(){this.inherited(arguments)},drawMap:function(){this.beginDrawMap();var t=this.getLayer().getData(),e=this.getLayer().getDataType(),a=this.getCtx(),l=this.getDrawOptions(),n=l.label,i=this.getMap().getZoom();if(n&&n.font&&(a.font=n.font),"polyline"===e||"polygon"===e)for(var r=0,s=t.length;s>r;r++){var g=t[r].pgeo;a.beginPath(),a.moveTo(g[0][0],g[0][1]);for(var h=1;h<g.length;h++)a.lineTo(g[h][0],g[h][1]);if(a.fillStyle=this.dataRange.getColorByRange(t[r].count),(l.strokeStyle||"polyline"===e)&&a.stroke(),"polygon"===e&&(a.closePath(),a.fill()),n&&n.show&&(!n.minZoom||n.minZoom&&i>=n.minZoom)){n.fillStyle&&(a.fillStyle=n.fillStyle);var f=(new o).getGeoCenter(g);a.fillText(t[r].count,f[0],f[1])}}else{for(var y=this.getRadius(),r=0,s=t.length;s>r;r++){var p=t[r];a.fillStyle=this.dataRange.getColorByRange(p.count),a.beginPath(),a.moveTo(p.px,p.py),a.arc(p.px,p.py,y,0,2*Math.PI),a.closePath(),a.fill()}l.strokeStyle&&a.stroke()}this.endDrawMap()}})});